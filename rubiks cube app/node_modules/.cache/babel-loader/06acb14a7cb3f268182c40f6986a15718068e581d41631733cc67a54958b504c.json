{"ast":null,"code":"import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { forwardRef, useRef, useState, useEffect, createElement } from 'react';\nimport { extend, useThree, useFrame } from 'react-three-fiber';\nimport mergeRefs from 'react-merge-refs';\nimport { WebGLMultisampleRenderTarget, RGBAFormat, sRGBEncoding } from 'three';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass';\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass';\nimport { GammaCorrectionShader } from 'three/examples/jsm/shaders/GammaCorrectionShader';\nextend({\n  EffectComposer,\n  RenderPass,\n  ShaderPass\n});\nconst isWebGL2Available = () => {\n  try {\n    var canvas = document.createElement('canvas');\n    return !!(window.WebGL2RenderingContext && canvas.getContext('webgl2'));\n  } catch (e) {\n    return false;\n  }\n};\nconst Effects = /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n      children,\n      multisamping = 8,\n      renderIndex = 1,\n      disableGamma = false,\n      disableRenderPass = false\n    } = _ref,\n    props = _objectWithoutPropertiesLoose(_ref, [\"children\", \"multisamping\", \"renderIndex\", \"disableGamma\", \"disableRenderPass\"]);\n  const composer = useRef();\n  const {\n    scene,\n    camera,\n    gl,\n    size\n  } = useThree();\n  const [target] = useState(() => {\n    if (isWebGL2Available() && multisamping > 0) {\n      const t = new WebGLMultisampleRenderTarget(size.width, size.height, {\n        format: RGBAFormat,\n        encoding: sRGBEncoding\n      });\n      t.samples = 8;\n      return t;\n    }\n  });\n  useEffect(() => {\n    var _composer$current, _composer$current2;\n    (_composer$current = composer.current) == null ? void 0 : _composer$current.setSize(size.width, size.height);\n    (_composer$current2 = composer.current) == null ? void 0 : _composer$current2.setPixelRatio(gl.getPixelRatio());\n  }, [gl, size]);\n  useFrame(() => {\n    var _composer$current3;\n    return (_composer$current3 = composer.current) == null ? void 0 : _composer$current3.render();\n  }, renderIndex);\n  return /*#__PURE__*/createElement(\"effectComposer\", _extends({\n    ref: mergeRefs([ref, composer]),\n    args: [gl, target]\n  }, props), !disableRenderPass && /*#__PURE__*/createElement(\"renderPass\", {\n    attachArray: \"passes\",\n    args: [scene, camera]\n  }), !disableGamma && /*#__PURE__*/createElement(\"shaderPass\", {\n    attachArray: \"passes\",\n    args: [GammaCorrectionShader]\n  }), children);\n});\nexport { Effects, isWebGL2Available };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}